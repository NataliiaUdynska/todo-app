<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>To-Do List</title>
    <style>
        body { font-family: Arial; margin: 40px; background-color: #f7f7f7; }
        h1 { color: ##0A0A0A; text-align: center; }
        ul { list-style: none; padding: 0; }
        .task-item {
            padding: 12px 15px;
            margin: 8px 0;
            border-radius: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .task-HIGH   { background-color: #E34234; color: white; }
        .task-MEDIUM { background-color: #ee9e49; color: white; }
        .task-LOW    { background-color: #5878e9; color: white; }
        .completed { text-decoration: line-through; opacity: 0.7; }
        .task-time { font-size: 12px; opacity: 0.8; margin-top: 4px; }
        .btn { padding: 5px 10px; text-decoration: none; margin: 0 3px; }
        .btn-toggle { background: #ffcc00; }
        .btn-edit { background: #28a745; color: white; }
        .btn-delete { background: #a20110; color: white; }
        .btn-priority { background: #1D334A; color: white; }
        .add-form { margin-bottom: 20px; display: flex; gap: 10px; align-items: center; flex-wrap: wrap; }
        .add-form input[type="text"] { padding: 8px; width: 300px; border: 1px solid #ccc; border-radius: 4px; }
        .add-form select { padding: 8px; border: 1px solid #ccc; border-radius: 4px; }
        .add-form input[type="submit"] { padding: 8px 12px; background: #4CAF50; color: white; border: none; border-radius: 4px; cursor: pointer; }
    </style>
</head>
<body>
<h1>ğŸ“ To-Do List</h1>

<form th:object="${newTask}" th:action="@{/add}" method="post" class="add-form">
    <input type="text" th:field="*{description}" placeholder="Enter a new task" required />
    <select th:field="*{priority}" required>
        <option value="LOW">ğŸ”µ Not urgent</option>
        <option value="MEDIUM">ğŸŸ  Average</option>
        <option value="HIGH">ğŸ”´ Urgently</option>
    </select>
    <input type="submit" value="Add Task" />
</form>
<div style="margin: 10px 0; font-weight: bold; color: #2c3e50;">
    ğŸ”´ Urgently â†’ ğŸŸ  Average â†’ ğŸ”µ Not urgent
</div>
<ul>
    <li th:each="task : ${tasks}">
        <div th:class="|task-item task-${task.priority} ${task.completed ? 'completed' : ''}|">
            <div>
                <span th:text="${task.description}"></span>
                <div class="task-time" th:text="${#temporals.format(task.createdAt, 'HH:mm, dd MMM yyyy')}"></div>
            </div>
            <div>
                <a th:href="@{/toggle/{id}(id=${task.id})}" class="btn btn-toggle">
                    <th:block th:text="${task.completed ? 'Undo' : 'Done'}"></th:block>
                </a>
                <a th:href="@{/edit/{id}(id=${task.id})}" class="btn btn-edit">Edit</a>
                <a th:href="@{/delete/{id}(id=${task.id})}" class="btn btn-delete">Delete</a>
                <a th:href="@{/set-priority/{id}(id=${task.id})}" class="btn btn-priority">Set Priority</a>
            </div>
        </div>
    </li>
</ul>

<div th:if="${#lists.isEmpty(tasks)}" style="text-align: center; color: #888;">
    <p>No tasks yet. Add one above!</p>
</div>
</body>
</html>