<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>To-Do List</title>
    <style>
        body { font-family: Arial; margin: 40px; }
        h1 { color: #2c3e50; }
        ul { list-style: none; padding: 0; }
        .task-item {
            padding: 12px;
            margin: 8px 0;
            border-radius: 6px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .task-HIGH   { background-color: #E34234; color: white; }
        .task-MEDIUM { background-color: #ee9e49; color: white; }
        .task-LOW    { background-color: #5878e9; color: white; }
        .completed { text-decoration: line-through; opacity: 0.7; }
        .btn { padding: 5px 10px; text-decoration: none; margin: 0 5px; }
        .btn-toggle { background: #ffcc00; }
        .btn-edit { background: #28a745; color: white; }
        .btn-delete { background: #a20110; color: white; }
        .btn-priority { background: #555; color: white; }
    </style>
</head>
<body>
<h1>üìù To-Do List</h1>

<form th:object="${newTask}" th:action="@{/add}" method="post">
    <input type="text" th:field="*{description}" placeholder="Enter a new task" required />
    <select th:field="*{priority}" required>
        <option value="LOW">üîµ Not urgent</option> // –Ω–µ —Å—Ä–æ—á–Ω–æ
        <option value="MEDIUM">üü† Average</option> // —Å—Ä–µ–¥–Ω–µ
        <option value="HIGH">üî¥ Urgently</option>// —Å—Ä–æ—á–Ω–æ
    </select>
    <input type="submit" value="Add Task" />
</form>

<ul>
    <li th:each="task : ${tasks}">
        <div th:class="|task-item task-${task.priority} ${task.completed ? 'completed' : ''}|">
            <span th:text="${task.description}"></span>
            <div>
                <a th:href="@{/toggle/{id}(id=${task.id})}" class="btn btn-toggle">
                    <th:block th:text="${task.completed ? 'Undo' : 'Done'}"></th:block>
                </a>
                <a th:href="@{/edit/{id}(id=${task.id})}" class="btn btn-edit">Edit</a>
                <a th:href="@{/delete/{id}(id=${task.id})}" class="btn btn-delete">Delete</a>
                <a th:href="@{/set-priority/{id}(id=${task.id})}" class="btn btn-priority">Set Priority</a>
            </div>
        </div>
    </li>
</ul>

<div th:if="${#lists.isEmpty(tasks)}">
    <p><em>No tasks yet. Add one above!</em></p>
</div>
</body>
</html>